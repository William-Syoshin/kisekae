# ğŸŒ Dify ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç¿»è¨³ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­å®šã‚¬ã‚¤ãƒ‰

æ—¥æœ¬èªã®æœè£…èª¬æ˜ã‚’ã€AI ç”»åƒç”Ÿæˆã«æœ€é©ãªè‹±èªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«ç¿»è¨³ãƒ»æœ€é©åŒ–ã™ã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§ã™ã€‚

---

## ğŸ¯ ç›®æ¨™

æ—¥æœ¬èªå…¥åŠ›ï¼ˆä¾‹ï¼šã€Œèµ¤ã„ãƒ¯ãƒ³ãƒ”ãƒ¼ã‚¹ã€ï¼‰â†’ æœ€é©åŒ–ã•ã‚ŒãŸè‹±èªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆä¾‹ï¼šã€ŒAn elegant red dress, full body shot, professional fashion photography...ã€ï¼‰

---

## ğŸ“‹ å¿…è¦ãªæº–å‚™

### 1. Dify ã«ãƒ­ã‚°ã‚¤ãƒ³

```
https://cloud.dify.ai/
```

ã¾ãŸã¯è‡ªå·±ãƒ›ã‚¹ãƒˆç‰ˆã‚’ä½¿ç”¨

### 2. LLM ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’è¨­å®š

#### æ¨å¥¨ãƒ¢ãƒ‡ãƒ«

| ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼  | ãƒ¢ãƒ‡ãƒ«            | æ—¥æœ¬èª â†’ è‹±èª | ã‚³ã‚¹ãƒˆ | æ¨å¥¨åº¦  |
| ------------- | ----------------- | ------------- | ------ | ------- |
| **OpenAI**    | GPT-4o-mini       | â­â­â­â­â­    | ä½     | âœ… æ¨å¥¨ |
| **Anthropic** | Claude 3 Haiku    | â­â­â­â­â­    | ä½     | âœ… æ¨å¥¨ |
| **OpenAI**    | GPT-4o            | â­â­â­â­â­    | é«˜     | é«˜å“è³ª  |
| **Anthropic** | Claude 3.5 Sonnet | â­â­â­â­â­    | ä¸­     | é«˜å“è³ª  |

**æ¨å¥¨: GPT-4o-mini**ï¼ˆã‚³ã‚¹ãƒ‘æœ€é«˜ï¼‰

---

## ğŸ”§ Dify ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ä½œæˆæ‰‹é †

### ã‚¹ãƒ†ãƒƒãƒ— 1: æ–°ã—ã„ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ä½œæˆ

1. Dify ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã€Œ**ã‚¹ã‚¿ã‚¸ã‚ª**ã€â†’ã€Œ**ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ä½œæˆ**ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
2. åå‰: `Fashion Prompt Translator`ï¼ˆæ—¥æœ¬èªåï¼šæœè£…ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç¿»è¨³ï¼‰
3. ã‚¿ã‚¤ãƒ—: **ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼** ã‚’é¸æŠ
4. ã‚¢ã‚¤ã‚³ãƒ³: ğŸŒ ã‚’é¸æŠï¼ˆä»»æ„ï¼‰

---

### ã‚¹ãƒ†ãƒƒãƒ— 2: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®æ§‹ç¯‰

#### ğŸ“¥ **ãƒ–ãƒ­ãƒƒã‚¯ 1: é–‹å§‹ï¼ˆStartï¼‰**

1. å·¦å´ã®ãƒ‘ãƒãƒ«ã‹ã‚‰ã€Œ**é–‹å§‹**ã€ãƒ–ãƒ­ãƒƒã‚¯ã‚’é¸æŠï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§é…ç½®æ¸ˆã¿ï¼‰
2. å…¥åŠ›å¤‰æ•°ã‚’è¨­å®šï¼š

| è¨­å®šé …ç›®         | å€¤                     |
| ---------------- | ---------------------- |
| **å¤‰æ•°å**       | `japanese_description` |
| **ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å** | `æ—¥æœ¬èªèª¬æ˜`           |
| **ã‚¿ã‚¤ãƒ—**       | ãƒ†ã‚­ã‚¹ãƒˆ               |
| **å¿…é ˆ**         | âœ… ã‚ªãƒ³                |
| **æœ€å¤§é•·**       | 200                    |

**å…¥åŠ›å¤‰æ•°ã®èª¬æ˜æ¬„**:

```
æœè£…ã®æ—¥æœ¬èªèª¬æ˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆä¾‹: èµ¤ã„ãƒ¯ãƒ³ãƒ”ãƒ¼ã‚¹ã€ç™½ã„ã‚·ãƒ£ãƒ„ã¨ã‚¸ãƒ¼ãƒ³ã‚ºï¼‰
```

---

#### ğŸ¤– **ãƒ–ãƒ­ãƒƒã‚¯ 2: LLM**

1. å·¦ãƒ‘ãƒãƒ«ã‹ã‚‰ã€Œ**LLM**ã€ãƒ–ãƒ­ãƒƒã‚¯ã‚’ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—
2. é–‹å§‹ãƒ–ãƒ­ãƒƒã‚¯ã¨æ¥ç¶š

**LLM ãƒ–ãƒ­ãƒƒã‚¯ã®è¨­å®š**:

##### ãƒ¢ãƒ‡ãƒ«é¸æŠ

- **ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼**: OpenAI
- **ãƒ¢ãƒ‡ãƒ«**: gpt-4o-mini
- **æ¸©åº¦**: 0.7
- **æœ€å¤§ãƒˆãƒ¼ã‚¯ãƒ³**: 300
- **Top P**: 0.9

##### ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

```
You are a professional AI prompt engineer specializing in fashion photography and image generation.

Your task:
1. Translate the Japanese fashion description to English
2. Enhance it for AI image generation (Flux Schnell model)
3. Add professional photography terminology
4. Make it vivid, descriptive, and optimized for high-quality output

Guidelines:
- Keep it concise (50-100 words)
- Include: clothing details, photography style, lighting, background, quality keywords
- Use positive descriptive words
- Avoid negative prompts
- Focus on visual elements

Output format: A single paragraph of enhanced English prompt, ready for AI image generation.

Examples:
Input: "èµ¤ã„ãƒ¯ãƒ³ãƒ”ãƒ¼ã‚¹"
Output: "An elegant red dress, full body shot, professional fashion photography, soft studio lighting, white background, high quality, 8k resolution, detailed fabric texture, graceful pose"

Input: "ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ãªç™½ã„ã‚·ãƒ£ãƒ„ã¨ã‚¸ãƒ¼ãƒ³ã‚º"
Output: "Casual white shirt and blue jeans, relaxed fit, modern street style photography, natural lighting, urban background, high quality, detailed clothing texture, comfortable and stylish"
```

##### ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

```
{{#start.japanese_description#}}
```

##### ãƒ¬ã‚¹ãƒãƒ³ã‚¹

ã€Œ**text**ã€ã‚’é¸æŠï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰

---

#### ğŸ“¤ **ãƒ–ãƒ­ãƒƒã‚¯ 3: çµ‚äº†ï¼ˆEndï¼‰**

1. å·¦ãƒ‘ãƒãƒ«ã‹ã‚‰ã€Œ**çµ‚äº†**ã€ãƒ–ãƒ­ãƒƒã‚¯ã‚’ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—
2. LLM ãƒ–ãƒ­ãƒƒã‚¯ã¨æ¥ç¶š

**çµ‚äº†ãƒ–ãƒ­ãƒƒã‚¯ã®è¨­å®š**:

å‡ºåŠ›å¤‰æ•°ã‚’è¿½åŠ ï¼š

| è¨­å®šé …ç›®   | å€¤               |
| ---------- | ---------------- |
| **å¤‰æ•°å** | `english_prompt` |
| **ã‚¿ã‚¤ãƒ—** | ãƒ†ã‚­ã‚¹ãƒˆ         |
| **ã‚½ãƒ¼ã‚¹** | `{{#llm.text#}}` |

**èª¬æ˜æ¬„**:

```
æœ€é©åŒ–ã•ã‚ŒãŸè‹±èªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
```

---

### ã‚¹ãƒ†ãƒƒãƒ— 3: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ä¿å­˜ï¼†å…¬é–‹

1. å³ä¸Šã®ã€Œ**ä¿å­˜**ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ã€Œ**å…¬é–‹**ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
3. å…¬é–‹ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã§ã€Œ**å…¬é–‹**ã€ã‚’ã‚¯ãƒªãƒƒã‚¯

---

### ã‚¹ãƒ†ãƒƒãƒ— 4: API ã‚­ãƒ¼ã‚’å–å¾—

1. å…¬é–‹å¾Œã€ã€Œ**API ç®¡ç†**ã€ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ã€Œ**API ã‚­ãƒ¼**ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã€Œ**ä½œæˆ**ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. åå‰: `Kisekae App`
4. ã€Œ**ä½œæˆ**ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
5. **API ã‚­ãƒ¼ã‚’ã‚³ãƒ”ãƒ¼**ï¼ˆå¾Œã§ä½¿ç”¨ï¼‰

**é‡è¦**: API ã‚­ãƒ¼ã¯ä¸€åº¦ã—ã‹è¡¨ç¤ºã•ã‚Œãªã„ã®ã§ã€å¿…ãšã‚³ãƒ”ãƒ¼ã—ã¦ä¿å­˜ã—ã¦ãã ã•ã„ï¼

---

### ã‚¹ãƒ†ãƒƒãƒ— 5: API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ç¢ºèª

ã€Œ**API ç®¡ç†**ã€ã‚¿ãƒ–ã§ä»¥ä¸‹ã‚’ç¢ºèªï¼š

```
API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ: https://api.dify.ai/v1
ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡ŒURL: https://api.dify.ai/v1/workflows/run
```

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆ

### Dify å†…ã§ãƒ†ã‚¹ãƒˆ

1. ã€Œ**ãƒ‡ãƒãƒƒã‚°ã¨ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼**ã€ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ã€Œæ—¥æœ¬èªèª¬æ˜ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«å…¥åŠ›:
   ```
   èµ¤ã„ãƒ¯ãƒ³ãƒ”ãƒ¼ã‚¹
   ```
3. ã€Œ**å®Ÿè¡Œ**ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
4. å‡ºåŠ›ã‚’ç¢ºèª:
   ```
   An elegant red dress, full body shot, professional fashion photography, soft studio lighting, white background, high quality, 8k resolution, detailed fabric texture, graceful pose
   ```

### cURL ã§ãƒ†ã‚¹ãƒˆ

```bash
curl -X POST 'https://api.dify.ai/v1/workflows/run' \
  -H 'Authorization: Bearer YOUR-API-KEY' \
  -H 'Content-Type: application/json' \
  -d '{
    "inputs": {
      "japanese_description": "èµ¤ã„ãƒ¯ãƒ³ãƒ”ãƒ¼ã‚¹"
    },
    "response_mode": "blocking",
    "user": "user-001"
  }'
```

---

## ğŸ“ .env.local è¨­å®š

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®`.env.local`ãƒ•ã‚¡ã‚¤ãƒ«ã«ä»¥ä¸‹ã‚’è¿½åŠ ï¼š

```bash
# Difyè¨­å®šï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç¿»è¨³ç”¨ï¼‰
DIFY_API_KEY=app-xxxxxxxxxxxxxxxxxxxxxxxx
DIFY_API_ENDPOINT=https://api.dify.ai/v1
```

**è‡ªå·±ãƒ›ã‚¹ãƒˆç‰ˆã‚’ä½¿ç”¨ã™ã‚‹å ´åˆ**:

```bash
DIFY_API_ENDPOINT=http://localhost/v1
```

---

## ğŸ¨ ç¿»è¨³ã®ä¾‹

| æ—¥æœ¬èªå…¥åŠ›                            | è‹±èªå‡ºåŠ›ï¼ˆæœ€é©åŒ–ï¼‰                                                                                                                                                                    |
| ------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| èµ¤ã„ãƒ¯ãƒ³ãƒ”ãƒ¼ã‚¹                        | An elegant red dress, full body shot, professional fashion photography, soft studio lighting, white background, high quality, 8k resolution, detailed fabric texture, graceful pose   |
| ç™½ã„ã‚·ãƒ£ãƒ„ã¨ã‚¸ãƒ¼ãƒ³ã‚º                  | Casual white shirt and blue jeans, relaxed fit, modern street style photography, natural lighting, urban background, high quality, detailed clothing texture, comfortable and stylish |
| é»’ã„ã‚¹ãƒ¼ãƒ„                            | Professional black business suit, formal attire, corporate fashion photography, studio lighting, clean background, high quality, detailed fabric, confident pose                      |
| ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ãª T ã‚·ãƒ£ãƒ„ã¨ã‚·ãƒ§ãƒ¼ãƒˆãƒ‘ãƒ³ãƒ„ | Casual t-shirt and shorts, summer fashion, relaxed lifestyle photography, natural outdoor lighting, beach or park background, high quality, comfortable style                         |

---

## ğŸ’° ã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Š

### GPT-4o-mini ã‚’ä½¿ç”¨ã—ãŸå ´åˆ

- **å…¥åŠ›**: ~20 ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆæ—¥æœ¬èª 5-10 æ–‡å­—ï¼‰
- **å‡ºåŠ›**: ~100 ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆè‹±èªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼‰
- **åˆè¨ˆ**: ~120 ãƒˆãƒ¼ã‚¯ãƒ³/ãƒªã‚¯ã‚¨ã‚¹ãƒˆ

**æ–™é‡‘**:

- å…¥åŠ›: $0.15 / 1M tokens = $0.000003 / request
- å‡ºåŠ›: $0.60 / 1M tokens = $0.00006 / request
- **åˆè¨ˆ: ç´„ 0.02 å†† / ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**

**æœˆé–“ 1,000 ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**: ç´„ 20 å††

---

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚¨ãƒ©ãƒ¼: "Unauthorized"

**åŸå› **: API ã‚­ãƒ¼ãŒæ­£ã—ããªã„

**è§£æ±º**:

1. Dify ã§ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒã€Œå…¬é–‹ã€ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
2. API ã‚­ãƒ¼ã‚’å†ç”Ÿæˆ
3. `.env.local`ã® API ã‚­ãƒ¼ã‚’æ›´æ–°

### ã‚¨ãƒ©ãƒ¼: "Workflow not found"

**åŸå› **: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒå…¬é–‹ã•ã‚Œã¦ã„ãªã„

**è§£æ±º**:

1. Dify ã§ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’é–‹ã
2. ã€Œå…¬é–‹ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯

### ç¿»è¨³å“è³ªãŒä½ã„

**åŸå› **: ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒæœ€é©åŒ–ã•ã‚Œã¦ã„ãªã„

**è§£æ±º**:

1. Dify ã®ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’èª¿æ•´
2. æ¸©åº¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å¤‰æ›´ï¼ˆ0.5-0.9ï¼‰
3. ã‚ˆã‚Šå¤šãã®ä¾‹ã‚’è¿½åŠ 

---

## ğŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. âœ… Dify ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ä½œæˆãƒ»å…¬é–‹
2. âœ… API ã‚­ãƒ¼ã‚’å–å¾—
3. âœ… `.env.local`ã«è¨­å®šã‚’è¿½åŠ 
4. â­ï¸ Next.js ã‚¢ãƒ—ãƒªã¨çµ±åˆï¼ˆè‡ªå‹•ã§å®Ÿè£…ã•ã‚Œã¾ã™ï¼‰

---

## ğŸ“š å‚è€ƒãƒªãƒ³ã‚¯

- [Dify å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.dify.ai/)
- [Dify API Reference](https://docs.dify.ai/api-reference)
- [Flux Schnell Documentation](https://replicate.com/black-forest-labs/flux-schnell)

---

**ä½œæˆæ—¥**: 2026-01-11  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0
